<% content_for :title, "Sign in" %>

<% content_for :head do %>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
<% end %>

<div class="min-h-screen container mx-auto flex items-center justify-center px-4" style="min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 0 16px;">
  <%# Flash is rendered globally from layout %>

  <% if current_user %>
    <div style="max-width: 560px; width: 100%; margin: 6rem auto; padding: 24px; border-radius: 16px; background: rgba(255,255,255,0.10); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.18); box-shadow: 0 20px 50px rgba(0,0,0,0.35); text-align: center;">
      <div style="font-size: 14px; letter-spacing: .12em; color: rgba(255,255,255,0.7); text-transform: uppercase; margin-bottom: 6px;">
        Welcome
      </div>
      <h1 style="margin: 0 0 10px; font-size: 28px; line-height: 1.2; color: #ffffff;">Signed in</h1>
      <p style="margin: 0 0 22px; color: rgba(255,255,255,0.88);">You are signed in as <strong><%= current_user.email %></strong>.</p>
      <%= button_to "Sign out", session_path, method: :delete, form: { style: "display:inline" }, style: "cursor:pointer; border:0; border-radius: 12px; padding: 12px 16px; color:#fff; background: linear-gradient(135deg,#ec4899,#8b5cf6); box-shadow: 0 10px 22px rgba(236,72,153,0.28); transition: transform .12s ease, filter .12s ease;" %>
    </div>
  <% else %>
    <div class="w-full max-w-md">
      <h1 class="mb-6 text-center text-4xl md:text-5xl text-white" style="font-family: 'Playfair Display', ui-serif, serif;">Nestwork</h1>
      <div class="backdrop-blur bg-white/10 border border-white/10 rounded-2xl shadow-2xl p-8">
        <%= form_with url: session_path, method: :post, local: true do |f| %>
          <div class="mb-4">
            <label for="email" class="block mb-2 text-white/90">Email</label>
            <%= email_field_tag :email, params[:email], required: true, autofocus: true, autocomplete: "email", class: "w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 placeholder-white/60 text-white focus:outline-none focus:ring-2 focus:ring-fuchsia-400 focus:border-transparent" %>
          </div>
          <div class="mb-6">
            <label for="password" class="block mb-2 text-white/90">Password</label>
            <%= password_field_tag :password, nil, required: true, autocomplete: "current-password", class: "w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 placeholder-white/60 text-white focus:outline-none focus:ring-2 focus:ring-fuchsia-400 focus:border-transparent" %>
          </div>
          <div>
            <%= submit_tag "Sign in", class: "w-full inline-flex items-center justify-center px-4 py-3 rounded-xl bg-purple-950 hover:bg-purple-950 active:bg-purple-950 text-white font-medium border border-white/5 transition-colors focus:outline-none focus:ring-2 focus:ring-white/10" %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>

